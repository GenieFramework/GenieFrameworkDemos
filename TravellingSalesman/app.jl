module App
include("tsp.jl")
using .TSP
using GenieFramework
@genietools

N = 9

@app begin
    @in D = [0.0 256.0 137.0 152.0 193.0 461.0 542.0 627.0 889.0; 256.0 0.0 125.0 209.0 422.0 206.0 313.0 848.0 719.0; 137.0 125.0 0.0 143.0 297.0 326.0 424.0 723.0 829.0; 152.0 209.0 143.0 0.0 337.0 414.0 484.0 776.0 737.0; 193.0 422.0 297.0 337.0 0.0 623.0 720.0 517.0 1075.0; 461.0 206.0 326.0 414.0 623.0 0.0 249.0 840.0 700.0; 542.0 313.0 424.0 484.0 720.0 249.0 0.0 1089.0 511.0; 627.0 848.0 723.0 776.0 517.0 840.0 1089.0 0.0 1552.0; 889.0 719.0 829.0 737.0 1075.0 700.0 511.0 1552.0 0.0]
    @out X = zeros(9, 9)
    @onchange isready begin
        X = solve_tsp(D)
        @show X
    end
end

ui() = p("{{X}}")

@page("/", ui)
Server.up()
end
